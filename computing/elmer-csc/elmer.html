
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Elmer Multiphysics &#8212; Majordome  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'computing/elmer-csc/elmer';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="General Tips" href="../general-tips.html" />
    <link rel="prev" title="Text user interface (TUI)" href="../ansys-fluent/tui.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Majordome  documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Majordome</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../examples/index.html">Examples</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples/common_.html">Common utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/energy_.html">Energy models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/fluent_.html">Fluent files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/reactor_.html">Reactor models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/transport_.html">Transport properties</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../advanced/index.html">Advanced</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/plug_.html">Plug flow coupling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/plug_phd_.html">Acetylene pyrolysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced/pyvista_tips_.html">PyVista recipes</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../modules/index.html">API Docs</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../modules/common.html">majordome.common</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/energy.html">majordome.energy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/fluent.html">majordome.fluent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/latex.html">majordome.latex</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/plotting.html">majordome.plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/reactor.html">majordome.reactor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../modules/transport.html">majordome.transport</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../teaching/index.html">Teaching</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../teaching/calphad_iron_nitrogen_.html">Equilibrium in Fe-N system</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">Computing</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction.html">Scientific computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools-git.html">Git version control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools-ssh.html">SSH key generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools-containers.html">Using containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools-selection.html">Selection of tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools-portable.html">Portable toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system-windows.html">Working on Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system-linux.html">Working on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ansys-fluent/tui.html">Text user interface (TUI)</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Elmer Multiphysics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../general-tips.html">General Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services.html">Deploying services</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../programming/index.html">Programming</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../programming/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../programming/julia-tips.html">Julia tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../programming/racket.html">Programming in Racket</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../programming/haskell.html">Minimal Haskell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../programming/other.html">Other languages</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../developers/index.html">Development</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../developers/devel.html">Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../developers/onkwargs_.html">A note on <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> parsing</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/computing/elmer-csc/elmer.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Elmer Multiphysics</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-answers">Quick answers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations-and-issues">Limitations and issues</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ongoing-work">Ongoing work</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieving-materials">Retrieving materials</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#elmer-fundamentals">Elmer Fundamentals</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocessing-steps">Preprocessing steps</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-elmer">Using Elmer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parallel-computing">Parallel computing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tips-and-ideas">Tips and ideas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#material-properties">Material properties</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#postprocessing">Postprocessing</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#solver-input-files-sif">Solver Input Files (SIF)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sections">Sections</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matc">MATC</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring-variables">Declaring variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#control-structures">Control structures</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#operators">Operators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#function-definitions">Function definitions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-functions">Built-in functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#usage">Usage</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#user-defined-functions">User-defined functions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#derived-fields">Derived fields</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-data-modules">Saving data modules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#openfoam-coupling">OpenFOAM coupling</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="elmer-multiphysics">
<h1>Elmer Multiphysics<a class="headerlink" href="#elmer-multiphysics" title="Link to this heading">#</a></h1>
<p>Elmer is a multiphysics finite element method (FEM) solver mainly developed by CSC and maintained at <a class="reference external" href="https://github.com/ElmerCSC/elmerfem">GitHub</a>. Several resources can be found in is <a class="reference external" href="https://www.research.csc.fi/web/elmer">official webpage</a> and in the <a class="reference external" href="https://www.elmerfem.org/blog/">community portal</a> and in the <a class="reference external" href="https://www.elmerfem.org/forum/index.php">forum</a>. There is also an <a class="reference external" href="https://www.youtube.com/&#64;elmerfem">YouTube channel</a> with several tutorials and illustration of the package capabilities.</p>
<p>The goal of this page is not to supersede the <a class="reference external" href="https://www.research.csc.fi/web/elmer/documentation">documentation</a>, but to make it (partially) available as a webpage where search and navigation become more intuitive. <em>Notice that this will be fed according to my personal projects and learning, so any contribution to accelerate the process is welcome.</em> Here you find a <em>user-guide-style</em> page with more details are provided below in the selected notes of Elmer documentation.</p>
<section id="quick-answers">
<h2>Quick answers<a class="headerlink" href="#quick-answers" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/ElmerOverview.pdf">Is Elmer the adequate tool for my projects?</a> In this document you find a short introduction to what Elmer can do and the main executables.</p></li>
<li><p><a class="reference external" href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/GetStartedElmer.pdf">How do I start learning Elmer?</a> Simply put, Elmer does not require basic users to master all the fundamentals of FEM, so following the <em>getting started</em> guide seems a good starting point. There you learn how to install, configure, and run the software.</p></li>
<li><p><a class="reference external" href="https://www.nic.funet.fi/pub/sci/physics/elmer/">Where do I get the binaries of Elmer?</a> If willing to run in Windows, the previous link provides the compiled binaries; there are also instructions for installing directly in Ubuntu as well as all the documentation and other test and sample cases.</p></li>
<li><p><a class="reference external" href="https://www.elmerfem.org/forum/">I feel alone, where do I find other users?</a> The forum seems to be moderately active, so you can go there to chat with other users and developers if you are not in a hurry.</p></li>
</ul>
</section>
<section id="limitations-and-issues">
<h2>Limitations and issues<a class="headerlink" href="#limitations-and-issues" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Currently the GUI is not able to import SIF files generated manually because it stores its state in a XML file; to be able to re-run cases from the GUI users need to create the equivalent case (eventually using the free text fields) in the GUI itself before regenerating a SIF file. Notice that this will overwrite the SIF file, so keep in mind to backup the file in another directory; that is especially required for highly customized cases.</p></li>
<li><p>When exporting meshes from <code class="docutils literal notranslate"><span class="pre">gmsh</span></code>, consider using the extension <code class="docutils literal notranslate"><span class="pre">.msh</span></code> and not <code class="docutils literal notranslate"><span class="pre">.msh2</span></code> as is often seen as a reminder of format 2 mesh; Elmer GUI is unable to render the mesh in this case. Notice that this has apparently no effect if running from command line.</p></li>
</ul>
</section>
<section id="ongoing-work">
<h2>Ongoing work<a class="headerlink" href="#ongoing-work" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Development of a <a class="reference external" href="https://github.com/wallytutor/elmer-sif-vscode">VS Code syntax highlight extension</a> with help of data provided in <a class="reference external" href="https://github.com/ElmerCSC/elmerfem/blob/devel/fem/src/SOLVER.KEYWORDS">SOLVER.KEYWORDS</a>.</p></li>
</ul>
</section>
<section id="retrieving-materials">
<h2>Retrieving materials<a class="headerlink" href="#retrieving-materials" title="Link to this heading">#</a></h2>
<p>Because there are plenty of interesting materials in Elmer public directory, it is worth downloading it all and selecting what to keep later. In a Linux terminal one could run the following command. If you also want to retrieve the animations, binaries, and virtual machines, consider removing and/or modifying the <code class="docutils literal notranslate"><span class="pre">-X</span></code> options.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>

<span class="nv">URL</span><span class="o">=</span><span class="s2">&quot;https://www.nic.funet.fi/pub/sci/physics/elmer/&quot;</span>

wget<span class="w"> </span>-r<span class="w"> </span>-l<span class="w"> </span><span class="m">20</span><span class="w"> </span>--no-parent<span class="w">           </span><span class="se">\</span>
<span class="w">    </span>-X<span class="w"> </span>/pub/sci/physics/elmer/anim/<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>-X<span class="w"> </span>/pub/sci/physics/elmer/bin/<span class="w">  </span><span class="se">\</span>
<span class="w">    </span>-R<span class="w"> </span><span class="s2">&quot;index.html*&quot;</span><span class="w">                </span><span class="se">\</span>
<span class="w">    </span><span class="si">${</span><span class="nv">URL</span><span class="si">}</span>
</pre></div>
</div>
</section>
<section id="elmer-fundamentals">
<h2>Elmer Fundamentals<a class="headerlink" href="#elmer-fundamentals" title="Link to this heading">#</a></h2>
<section id="preprocessing-steps">
<h3>Preprocessing steps<a class="headerlink" href="#preprocessing-steps" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Other than the native <code class="docutils literal notranslate"><span class="pre">ElmerGrid</span></code>, several other software can be used for conceiving a geometry and mesh generation workflow. Users are encouraged to use external tools such as <a class="reference external" href="https://gmsh.info/">gmsh</a> or <a class="reference external" href="https://www.salome-platform.org/">Salome</a> to generate computational meshes, built-in support in Elmer bein limited to very simple geometries only. For complex geometries <a class="reference external" href="https://www.freecad.org/">FreeCAD</a> is a standout alternative. For more consider reading <em>Geometry and Preprocessing</em>.</p></li>
<li><p>Not all <code class="docutils literal notranslate"><span class="pre">gmsh</span></code> standard mesh formats are supported, but only version 2 (as for OpenFOAM); that said, users are encouraged to export mesh in UNV format to avoid compatibility issues, and also because both proposed tools support it. You can control the element orders in command line using option <code class="docutils literal notranslate"><span class="pre">-order</span> <span class="pre">&lt;N&gt;</span></code>; gmsh operates this way so that the same script can generate any supported element type.</p></li>
<li><p>For importing meshes one uses <code class="docutils literal notranslate"><span class="pre">ElmerGrid</span> <span class="pre">&lt;input-format&gt;</span> <span class="pre">&lt;output-format&gt;</span></code>, where the format arguments are documented in the <a class="reference external" href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/ElmerGridManual.pdf">manual</a> sections 1.3 and 1.4. The UNV input is given by number 8 while standard <code class="docutils literal notranslate"><span class="pre">ElmerSolver</span></code> output by number 2, so that the conversion command would start with <code class="docutils literal notranslate"><span class="pre">ElmerGrid</span> <span class="pre">8</span> <span class="pre">2</span> <span class="pre">&lt;other-arguments...&gt;</span></code>. Always verify the number of nodes remain untouched after conversion - or if it changed when using option <code class="docutils literal notranslate"><span class="pre">-merge</span> <span class="pre">&lt;dist&gt;</span></code>, merging nodes that are closer than the user-defined <code class="docutils literal notranslate"><span class="pre">&lt;dist&gt;</span></code>.</p></li>
<li><p>Remember to use <code class="docutils literal notranslate"><span class="pre">Coherence;</span></code>  with OpenCASCADE factory in gmsh scripts to automatically strip internal faces; that might not be enough for complex cases, see below. <strong>Note:</strong> I tried doing so and unless <code class="docutils literal notranslate"><span class="pre">Physical</span> <span class="pre">Surfaces</span></code> naming the external boundaries are provided every interface is dumped and imported by Elmer; maybe I misunderstood the use of command!</p></li>
<li><p>Because faces are not named in Elmer, <em>i.e.</em> no matter what <code class="docutils literal notranslate"><span class="pre">Physical</span> <span class="pre">Surface</span></code> names you provide in gmsh, even for the advanced user working from command line it might be interesting to use the interactive zone grouping capabilities of <code class="docutils literal notranslate"><span class="pre">ElmerGUI</span></code>. That might even become a <em>requirement</em> as geometric complexity grows.</p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Software</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FreeCAD</p></td>
<td><p>Geometry only for now, probably the best in the list; good parametric modeling support. Has native Elmer integration.</p></td>
</tr>
<tr class="row-odd"><td><p>Salome</p></td>
<td><p>Can export UNV (8) meshes readable by Elmer. An extension to call Elmer directly from Salome is under development.</p></td>
</tr>
<tr class="row-even"><td><p>gmsh</p></td>
<td><p>Can export MSH2 (14) and UNV (8) formats readable by Elmer.</p></td>
</tr>
<tr class="row-odd"><td><p>netgen</p></td>
<td><p>Is able to write native Elmer linear meshes; can be used as a plug-in.</p></td>
</tr>
<tr class="row-even"><td><p>tetgen</p></td>
<td><p>Can be used as a plug-in.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="using-elmer">
<h3>Using Elmer<a class="headerlink" href="#using-elmer" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Newcomers might be interested in <code class="docutils literal notranslate"><span class="pre">ElmerGUI</span></code>; although very intuitive, the interface is quite limited and for complex programs running from command line is the preferred mode.</p></li>
<li><p>Most users will finally end setting up an workflow employing both to <code class="docutils literal notranslate"><span class="pre">ElmerSolver</span></code> (to run the simulations) and <code class="docutils literal notranslate"><span class="pre">ElmerGrid</span></code> (to prepare the grid and setup parallelization).</p></li>
<li><p>There is also <code class="docutils literal notranslate"><span class="pre">ViewFactors</span></code> which might be useful in special cases involving radiation and other executables but they are not mentioned here because they fall in the legacy code family.</p></li>
<li><p>Users must be aware that Elmer has no default unit system; one must take care that units are coherent across the different models and materials.</p></li>
<li><p>Support to mathematical operations in SIF through MATC, which has its own <a class="reference external" href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/MATCManual.pdf">syntax and documentation</a>. It can be used, <em>e.g.</em> for computing temperature dependent properties, what can be helpful for simple expressions (instead of writing Fortran 90 code for extensions).</p></li>
</ul>
</section>
<section id="parallel-computing">
<h3>Parallel computing<a class="headerlink" href="#parallel-computing" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Before running in parallel a working case running in serial is required; using <code class="docutils literal notranslate"><span class="pre">ElmerGUI</span></code> this can be enabled in <code class="docutils literal notranslate"><span class="pre">Run</span> <span class="pre">&gt;</span> <span class="pre">Parallel</span> <span class="pre">settings...</span></code>. Notice that after running postprocessing of <code class="docutils literal notranslate"><span class="pre">.pvtu</span></code> needs to be done in ParaView directly.</p></li>
<li><p>To partition the mesh from command line one needs to run <code class="docutils literal notranslate"><span class="pre">ElmerGrid</span> <span class="pre">2</span> <span class="pre">2</span> <span class="pre">&lt;mesh-name&gt;</span> <span class="pre">-partdual</span> <span class="pre">-metiskway</span> <span class="pre">&lt;N&gt;</span></code>, which will convert <code class="docutils literal notranslate"><span class="pre">&lt;mesh-name&gt;</span></code> from Elmer mesh format (2) into itself (thus the <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">2</span></code> in the command) and dump the resulting mesh in <code class="docutils literal notranslate"><span class="pre">partitions.&lt;N&gt;</span></code>, with <code class="docutils literal notranslate"><span class="pre">&lt;N&gt;</span></code> being the number of physical cores to run the simulation.</p></li>
<li><p>Parallel cases can be run with <code class="docutils literal notranslate"><span class="pre">mpiexec</span> <span class="pre">-n</span> <span class="pre">&lt;N&gt;</span> <span class="pre">ElmerSolver_mpi</span></code>. Notice that under Linux the MPI runner is called <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> instead of <code class="docutils literal notranslate"><span class="pre">mpiexec</span></code>.</p></li>
</ul>
</section>
<section id="tips-and-ideas">
<h3>Tips and ideas<a class="headerlink" href="#tips-and-ideas" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">Coordinate</span> <span class="pre">Mapping</span></code> to rotate meshes with oriented particles</p></li>
<li><p>Scaling of a single direction can be done with <code class="docutils literal notranslate"><span class="pre">Coordinate</span> <span class="pre">Scaling</span></code></p></li>
<li><p>Time step can be changed with a list of elements in <code class="docutils literal notranslate"><span class="pre">Timestep</span> <span class="pre">Intervals</span></code>, <em>e.g.</em></p></li>
</ul>
<div class="highlight-Fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Run 10 time-steps of 0.1 s, then 100 with 1.0 s.</span>
<span class="n">Timestep</span><span class="w"> </span><span class="n">Intervals</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="mi">100</span>
<span class="n">Timestep</span><span class="w"> </span><span class="n">Sizes</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.1</span><span class="w"> </span><span class="mf">1.0</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Take care with <code class="docutils literal notranslate"><span class="pre">Linear</span> <span class="pre">System</span> <span class="pre">Abort</span> <span class="pre">Not</span> <span class="pre">Converged</span> <span class="pre">=</span> <span class="pre">True</span></code> for physical consistency; generally continuing a simulation after a failed step is worthless unless one is pseudo-stepping towards a difficult (highly nonlinear) steady-state.</p></li>
</ul>
</section>
<section id="material-properties">
<h3>Material properties<a class="headerlink" href="#material-properties" title="Link to this heading">#</a></h3>
<p>Material properties can be specified as:</p>
<ul class="simple">
<li><p>Constant: just the default numeric input in SIF files</p></li>
<li><p>Tabulated linearly or using a cubic spline, <em>e.g.</em></p></li>
</ul>
<div class="highlight-Fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! Linear interpolation</span>
<span class="n">Viscosity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Variable</span><span class="w"> </span><span class="n">Temperature</span>
<span class="w">  </span><span class="kt">Real</span>
<span class="kt">	</span><span class="mi">29</span><span class="mf">8.15</span><span class="w"> </span><span class="mf">1.0</span>
<span class="w">	</span><span class="c">! ... more data here</span>
<span class="w">	</span><span class="mi">37</span><span class="mf">3.15</span><span class="w"> </span><span class="mf">2.0</span>
<span class="k">End</span>

<span class="c">! Cubic spline interpolation</span>
<span class="n">Viscosity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Variable</span><span class="w"> </span><span class="n">Temperature</span>
<span class="w">  </span><span class="kt">Real </span><span class="n">cubic</span>
<span class="w">	</span><span class="mi">29</span><span class="mf">8.15</span><span class="w"> </span><span class="mf">1.0</span>
<span class="w">	</span><span class="mi">31</span><span class="mf">5.15</span><span class="w"> </span><span class="mf">1.1</span>
<span class="w">	</span><span class="mi">34</span><span class="mf">5.15</span><span class="w"> </span><span class="mf">1.5</span>
<span class="w">	</span><span class="c">! ... more data here</span>
<span class="w">	</span><span class="mi">37</span><span class="mf">3.15</span><span class="w"> </span><span class="mf">2.0</span>
<span class="k">End</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Arrays: for representing anisotropic bodies, <em>e.g.</em></p></li>
</ul>
<div class="highlight-Fortran notranslate"><div class="highlight"><pre><span></span><span class="n">Heat</span><span class="w"> </span><span class="n">Conductivity</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="err">\</span>
<span class="w">                         </span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="err">\</span>
<span class="w">                         </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">2</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Using MATC as explained below in this page. Notice that sourcing files in MATC is the recommended way to get reusable code; coding MATC in SIF files requires to escape all lines and quickly becomes messy.</p></li>
<li><p>User-defined functions (UDF) can also be provided in Fortran; notice that even when MATC can be used, this may lead to a speed-up of calculations with the inconvenient of needing more code. So for cases that are intended to be reused, it is important to consider writing proper extensions in Fortran. The following example illustrates a temperature dependent thermal conductivity function which is evaluated by Elmer at all nodes. In most cases a simple <code class="docutils literal notranslate"><span class="pre">USE</span> <span class="pre">DefUtils</span></code> is enough to get the required Elmer API to write the extension.</p></li>
</ul>
<div class="highlight-Fortran notranslate"><div class="highlight"><pre><span></span><span class="k">FUNCTION </span><span class="n">conductivity</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="nb">time</span><span class="p">)</span><span class="w"> </span><span class="k">RESULT</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
<span class="w">    </span><span class="c">!**************************************************************</span>
<span class="w">    </span><span class="c">! Load Elmer library.</span>
<span class="w">    </span><span class="c">!**************************************************************</span>

<span class="w">    </span><span class="k">USE </span><span class="n">DefUtils</span>
<span class="w">    </span><span class="k">IMPLICIT None</span>

<span class="w">    </span><span class="c">!**************************************************************</span>
<span class="w">    </span><span class="c">! Function interface.</span>
<span class="w">    </span><span class="c">!**************************************************************</span>

<span class="w">    </span><span class="k">TYPE</span><span class="p">(</span><span class="n">Model_t</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">model</span>
<span class="w">    </span><span class="kt">INTEGER</span><span class="w">       </span><span class="kd">::</span><span class="w"> </span><span class="n">n</span>
<span class="w">    </span><span class="kt">REAL</span><span class="p">(</span><span class="nb">KIND</span><span class="o">=</span><span class="n">dp</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="nb">time</span><span class="p">,</span><span class="w"> </span><span class="n">k</span>

<span class="w">    </span><span class="c">!**************************************************************</span>
<span class="w">    </span><span class="c">! Function internals.</span>
<span class="w">    </span><span class="c">!**************************************************************</span>

<span class="w">    </span><span class="k">TYPE</span><span class="p">(</span><span class="n">Variable_t</span><span class="p">),</span><span class="w"> </span><span class="k">POINTER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">varptr</span>
<span class="w">    </span><span class="kt">REAL</span><span class="p">(</span><span class="nb">KIND</span><span class="o">=</span><span class="n">dp</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">T</span>
<span class="w">    </span><span class="kt">INTEGER</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">idx</span>

<span class="w">    </span><span class="c">!**************************************************************</span>
<span class="w">    </span><span class="c">! Actual implementation</span>
<span class="w">    </span><span class="c">!**************************************************************</span>

<span class="w">    </span><span class="c">! Retrieve pointer to the temperature variable.</span>
<span class="w">    </span><span class="n">varptr</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">VariableGet</span><span class="p">(</span><span class="n">model</span><span class="p">%</span><span class="n">Variables</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Temperature&#39;</span><span class="p">)</span>

<span class="w">    </span><span class="c">! Access index of current node.</span>
<span class="w">    </span><span class="n">idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">varptr</span><span class="p">%</span><span class="n">Perm</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="w">    </span><span class="c">! Retrieve nodal temperature.</span>
<span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">varptr</span><span class="p">%</span><span class="n">Values</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span>

<span class="w">    </span><span class="c">! Compute heat conductivity from NodalTemperature, k=k(T)</span>
<span class="w">    </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="mf">2.5e-03</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">1.0e-06</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">T</span><span class="p">)</span>
<span class="k">END FUNCTION </span><span class="n">conductivity</span>
</pre></div>
</div>
<p>In order to compile the above assume it is written to <code class="docutils literal notranslate"><span class="pre">properties.f90</span></code> file; then one can call <code class="docutils literal notranslate"><span class="pre">elmerf90</span> <span class="pre">properties.f90</span> <span class="pre">–o</span> <span class="pre">properties</span></code> to generate the required shared library that is loaded in runtime by Elmer. Below we illustrate the use of <code class="docutils literal notranslate"><span class="pre">Procedure</span></code> to attach this library to a given material; first one provides the name of the shared library then the name of the function. A single library can in fact contain several functionalities.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">Material</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Solid&quot;</span>
<span class="w">  </span><span class="n">Heat</span><span class="w"> </span><span class="n">Conductivity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Variable</span><span class="w"> </span><span class="n">Time</span>
<span class="w">    </span><span class="n">Procedure</span><span class="w"> </span><span class="s">&quot;properties&quot;</span><span class="w"> </span><span class="s">&quot;conductivity&quot;</span>
<span class="w">  </span><span class="n">Heat</span><span class="w"> </span><span class="n">Capacity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span>
<span class="w">  </span><span class="n">Density</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2500</span>
<span class="n">End</span>
</pre></div>
</div>
</section>
<section id="postprocessing">
<h3>Postprocessing<a class="headerlink" href="#postprocessing" title="Link to this heading">#</a></h3>
<p>For postprocessing the recommended way is by using external tools as <a class="reference external" href="https://www.paraview.org/">ParaView</a> and <a class="reference external" href="https://docs.pyvista.org/version/stable/">PyVista</a>, both handling well the VTK format of outputs. Nonetheless there are a some in-solver processing utilities that are worth knowing, especially in what concerns extracting and filtering data from certain regions, creating new fields, and computing fluxes.</p>
<ul class="simple">
<li><p>Creating a new scalar</p></li>
</ul>
<p>The keyword set of materials is actually not fixed; one can, for instance, create composition field in different units with MATC, as illustrated below (case <a class="reference external" href="https://github.com/wallytutor/WallyToolbox.jl/tree/main/apps/Elmer/diffusion_solids/carburizing_slycke_gui">here</a>):</p>
<div class="highlight-Fortran notranslate"><div class="highlight"><pre><span></span><span class="n">MoleFraction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Variable</span><span class="w"> </span><span class="n">Concentration</span>
<span class="w">  </span><span class="kt">Real </span><span class="n">MATC</span><span class="w"> </span><span class="s2">&quot;carbonmolefraction(tx)&quot;</span>
</pre></div>
</div>
<p>Then in solver <code class="docutils literal notranslate"><span class="pre">SaveMaterials</span></code>, this new name <code class="docutils literal notranslate"><span class="pre">MoleFraction</span></code> can be used as a variable:</p>
<div class="highlight-Fortran notranslate"><div class="highlight"><pre><span></span><span class="n">Solver</span><span class="w"> </span><span class="mi">1</span>
<span class="w">  </span><span class="n">Equation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SaveMaterials</span>
<span class="w">  </span><span class="k">Parameter </span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Concentration</span><span class="w"> </span><span class="n">Diffusivity</span>
<span class="w">  </span><span class="k">Parameter </span><span class="mi">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MoleFraction</span>
<span class="w">  </span><span class="k">Procedure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;SaveData&quot;</span><span class="w"> </span><span class="s2">&quot;SaveMaterials&quot;</span>
<span class="w">  </span><span class="n">Exec</span><span class="w"> </span><span class="n">Solver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">After</span><span class="w"> </span><span class="n">Timestep</span>
<span class="k">End</span>
</pre></div>
</div>
<p>Another situation that can be frequently found is unit conversion for temperature. It was chosen to implement it in <a class="reference external" href="https://github.com/wallytutor/WallyToolbox.jl/tree/main/apps/Elmer/conduction_refractory/transient_parallel">this case</a> because it is multi-material; that is a reminder that in such cases the new variable needs to be created for all materials (as this is a tweak, since the temperature is not a material property, but a global field). If forgotten in one material, an error will show up in ParaView telling you that the field is not available in some regions.</p>
</section>
</section>
<section id="solver-input-files-sif">
<h2>Solver Input Files (SIF)<a class="headerlink" href="#solver-input-files-sif" title="Link to this heading">#</a></h2>
<p>Once you get serious with Elmer it is a natural evolution to prefer to work with <em>SIF</em> files instead of the GUI most of the time; the GUI remains useful for raw case generation, avoiding writing boilerplate setups and to get default values right. This is also true in a majority of scientific computing software. The documentation of <em>SIF</em> is spread over the whole documentation of Elmer and this page tries to summarize it. For the beginner, this <a class="reference external" href="https://www.youtube.com/watch?v=iXVEqKTq5TE">video</a> is a good starting point, this page being more of a reference manual.</p>
<p>Because syntax highlighting is important for productivity, I am continuously developing a minimalistic extension for VS Code. Its partial development can be found <a class="reference external" href="https://github.com/wallytutor/elmer-sif-vscode">here</a>. You can clone that repository and copy the <code class="docutils literal notranslate"><span class="pre">sif/</span></code> directory under <code class="docutils literal notranslate"><span class="pre">%USERPROFILE%/.vscode/extensions</span></code>  or in the equivalent directory documented <a class="reference external" href="https://code.visualstudio.com/docs/editor/extension-marketplace#_where-are-extensions-installed">here</a>; later it will probably be packaged as a standard VS Code extension.</p>
<section id="sections">
<h3>Sections<a class="headerlink" href="#sections" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Header</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Simulation</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Constants</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Material</span> <span class="pre">&lt;n&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Body</span> <span class="pre">&lt;n&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Solver</span> <span class="pre">&lt;n&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Equation</span> <span class="pre">&lt;n&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Initial</span> <span class="pre">Condition</span> <span class="pre">&lt;n&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Boundary</span> <span class="pre">Condition</span> <span class="pre">&lt;n&gt;</span></code></p></li>
</ul>
</section>
</section>
<section id="matc">
<h2>MATC<a class="headerlink" href="#matc" title="Link to this heading">#</a></h2>
<p>Elmer provides a few extension methods. For complex models you might be prompted to use directly Fortran 90. For simpler things, such as providing temperature dependent thermophysical properties, it has its own parser for use in SIF, the metalanguage MATC. Expressions provided in MATC can be evaluated when file is read or during simulation execution.</p>
<p>Because it is quite concise, I summarized the whole of MATC syntax and functions in this page. For the official documentation please refer to <a class="reference external" href="https://www.nic.funet.fi/pub/sci/physics/elmer/doc/MATCManual.pdf">this document</a>.</p>
<section id="declaring-variables">
<h3>Declaring variables<a class="headerlink" href="#declaring-variables" title="Link to this heading">#</a></h3>
<p>Variables in MATC can be matrices and strings; nonetheless, both are stored as double precision arrays so creating large arrays of strings can represent a waste of memory. For some weird reason I could not yet figure out, MATC language can be quite counterintuitive.</p>
<p>Let’s start by creating a variable, say <code class="docutils literal notranslate"><span class="pre">x</span></code> below; attribution, such a in Python, creates the variable. It was stated that everything is a matrix or string; since <code class="docutils literal notranslate"><span class="pre">x</span></code> is not a string, it is actually a <span class="math notranslate nohighlight">\(1\times{}1\)</span> matrix and in this case we can omit the indexing when allocating its memory.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
</pre></div>
</div>
<p>So far nothing weird; when declaring a string as <code class="docutils literal notranslate"><span class="pre">k</span></code> below we are actually creating a <span class="math notranslate nohighlight">\(1\times{}5\)</span> row matrix, what is not unusual in many programming languages (except for being double precision here). Furthermore, we use the typical double-quotes notation for strings.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;hello&quot;</span>
</pre></div>
</div>
<p>Matrix indexing is zero-based, as in C or Python. Matrix slicing is done as in many scripting languages, such as Python, Julia, Octave, …, and we can reverse the order of the first <em>six</em> elements of an array <code class="docutils literal notranslate"><span class="pre">y</span></code> as follows:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">y</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="o">:</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="o">:</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Notice above the fact that matrix slicing is <em>last-inclusive</em>, as in Julia, meaning that all elements from index zero to five <em>inclusive</em> are included in the slice. Weirdness starts when you do something like</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">(</span><span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">142857</span>
</pre></div>
</div>
<p>which according to the documentation will produce an array <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">4</span> <span class="pre">2</span> <span class="pre">8</span> <span class="pre">5</span> <span class="pre">7</span> <span class="pre">1</span> <span class="pre">4</span> <span class="pre">2</span> <span class="pre">8</span></code>; I could not verify this behavior yet. Additionally, the following produces another unexpected result:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">z</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
</pre></div>
</div>
<p>If matrix <code class="docutils literal notranslate"><span class="pre">z</span></code> does not exist, this results in a <span class="math notranslate nohighlight">\(10\times{}10\)</span> matrix with all zeros except the explicitly declared element. The size of variables are dynamic, so in the above if <code class="docutils literal notranslate"><span class="pre">z</span></code> already existed but wa smaller, it would be padded with zeros instead.</p>
<p>Finally, logical indexing is also allowed:</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.05</span>
</pre></div>
</div>
</section>
<section id="control-structures">
<h3>Control structures<a class="headerlink" href="#control-structures" title="Link to this heading">#</a></h3>
<p>MATC provides conditionals and loops as control structures. Below we have the <code class="docutils literal notranslate"><span class="pre">if-else</span></code> statement, which can be declared inline of using a C-style declaration using braces.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">expr</span><span class="p">;</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="n">expr</span><span class="p">;</span>

<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">expr</span><span class="p">;</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="n">expr</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">expr</span><span class="p">;</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="n">expr</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Loops can be declared using both <code class="docutils literal notranslate"><span class="pre">for</span></code> or <code class="docutils literal notranslate"><span class="pre">while</span></code>. There is no mechanism of generating values within a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop and one must provide a vector of indexes for repetition. <em>In the official documentation there is no reference to a <code class="docutils literal notranslate"><span class="pre">continue</span></code> or <code class="docutils literal notranslate"><span class="pre">break</span></code> statement and I could not verify their existence yet</em>.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">vector</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">expr</span><span class="p">;</span>

<span class="k">for</span><span class="p">(</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="n">vector</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">expr</span><span class="p">;</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="n">expr</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="n">expr</span><span class="p">;</span>

<span class="k">while</span><span class="p">(</span><span class="w"> </span><span class="n">expr</span><span class="w"> </span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">expr</span><span class="p">;</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="n">expr</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="operators">
<h3>Operators<a class="headerlink" href="#operators" title="Link to this heading">#</a></h3>
<p>Assume the following definitions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">a</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code> and <code class="docutils literal notranslate"><span class="pre">c</span></code> ordinary matrices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">l</span></code>, <code class="docutils literal notranslate"><span class="pre">t</span></code> and <code class="docutils literal notranslate"><span class="pre">r</span></code> logical matrices</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">m</span></code> scalars</p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head text-left"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">=</span> <span class="pre">a'</span></code></p></td>
<td class="text-left"><p>is transpose of matrix a.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">=</span> <span class="pre">&#64;a</span></code></p></td>
<td class="text-left"><p>evaluate content of a string variable a as a MATC statement.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">=</span> <span class="pre">~l</span></code></p></td>
<td class="text-left"><p>elementwise logical not of  if x is not zero.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">^</span> <span class="pre">s</span></code></p></td>
<td class="text-left"><p>if a is a square matrix and s is integral, a matrix power is computed, otherwise an elementwise power.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">*</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>if a and b are compatible for matrix product, that is computed, otherwise if they are of the same size or at least one of them is scalar, an elementwise product is computed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">#</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>elementwise multiplication of a and b.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">/</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>is fraction of a and b computed elementwise.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>is sum of matrices a and b computed elementwise.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">-</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>is difference of matrices a and b computed elementwise.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">==</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>equality of matrices a and b elementwise.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">&lt;&gt;</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>inequality of matrices a and b elementwise.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>true if a is less than b computed elementwise.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">&gt;</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>true if a is greater than b computed elementwise.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">&lt;=</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>true if a is less than or equal to b computed elementwise.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">&gt;=</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>true if a is greater than or equal to b computed elementwise.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">n</span> <span class="pre">:</span> <span class="pre">m</span></code></p></td>
<td class="text-left"><p>return a vector of values starting from n and ending to m by increment of (plus-minus) one.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">l</span> <span class="pre">&amp;</span> <span class="pre">t</span></code></p></td>
<td class="text-left"><p>elementwise logical and of a and b.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">|</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>elementwise logical or of a and b.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">c</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">?</span> <span class="pre">b</span></code></p></td>
<td class="text-left"><p>reduction: set values of a where b is zero to zero.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">=</span> <span class="pre">n</span> <span class="pre">m</span> <span class="pre">%</span> <span class="pre">a</span></code></p></td>
<td class="text-left"><p>resize a to matrix of size n by m.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">=</span> <span class="pre">a</span></code></p></td>
<td class="text-left"><p>assigning a to b.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="function-definitions">
<h3>Function definitions<a class="headerlink" href="#function-definitions" title="Link to this heading">#</a></h3>
<p>The syntax of the function definition is similar to that of Julia and is given below. The function body is enclosed by braces. Instead of using a <code class="docutils literal notranslate"><span class="pre">return</span></code> statement, the resulting value is attributed to a variable named after the function with a leading underscore. Notice the <code class="docutils literal notranslate"><span class="pre">!</span></code> denoting comments in the description of the function.</p>
<div class="highlight-Fortran notranslate"><div class="highlight"><pre><span></span><span class="k">function </span><span class="n">name</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="w"> </span><span class="n">arg2</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span>
<span class="c">!</span>
<span class="c">! Optional function description (seen with help(&quot;name&quot;))</span>
<span class="c">!</span>
<span class="k">import </span><span class="n">var1</span><span class="p">,</span><span class="w"> </span><span class="n">var2</span>
<span class="n">export</span><span class="w"> </span><span class="n">var3</span><span class="p">,</span><span class="w"> </span><span class="n">var4</span>
<span class="err">{</span>
<span class="w">    </span><span class="n">expr</span><span class="p">;</span>
<span class="w">     </span><span class="p">...</span>
<span class="w">    </span><span class="n">expr</span><span class="p">;</span>

<span class="w">    </span><span class="err">_</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">value</span>
<span class="err">}</span>
</pre></div>
</div>
<p>Functions have their own list of variables. Global variables are not seen in this function unless imported by <code class="docutils literal notranslate"><span class="pre">import</span></code> or given as arguments. Local variables can be made global by the <code class="docutils literal notranslate"><span class="pre">export</span></code> statement.</p>
<p>Functions, if returning matrices, behave in many ways as variables do. So if you have defined function <code class="docutils literal notranslate"><span class="pre">mult</span></code> as follows</p>
<div class="highlight-Fortran notranslate"><div class="highlight"><pre><span></span><span class="k">function </span><span class="n">mult</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="err">{</span>
<span class="w">   </span><span class="err">_</span><span class="n">mult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="err">}</span>
</pre></div>
</div>
<p>You can get element (3,5) of the <code class="docutils literal notranslate"><span class="pre">a</span></code> times <code class="docutils literal notranslate"><span class="pre">b</span></code> matrix with <code class="docutils literal notranslate"><span class="pre">mult(x,y)[3,5]</span></code> or the diagonal values of the same matrix by <code class="docutils literal notranslate"><span class="pre">diag(mult(x,</span> <span class="pre">y))</span></code>.</p>
</section>
<section id="built-in-functions">
<h3>Built-in functions<a class="headerlink" href="#built-in-functions" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>C-style math</p></li>
</ul>
<p>The following listing provides a series of mathematical functions which follow a their meaning in C. The only exceptions are <code class="docutils literal notranslate"><span class="pre">ln</span></code> denoting the natural logarithm and <code class="docutils literal notranslate"><span class="pre">log</span></code> used here for base 10 logarithms.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">asin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">acos</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sinh</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cosh</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tanh</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">exp</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ln</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">log</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ceil</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">abs</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pow</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>General utilities</p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head text-left"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">funcdel(name)</span></code></p></td>
<td class="text-left"><p>Delete given function definition from parser.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">funclist(name)</span></code></p></td>
<td class="text-left"><p>Give header of the function given by name.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">env(name)</span></code></p></td>
<td class="text-left"><p>Get value of environment variable of the operating system.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exists(name)</span></code></p></td>
<td class="text-left"><p>Return true (non-zero) if variable by given name exists otherwise return false (=0).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source(name)</span></code></p></td>
<td class="text-left"><p>Execute commands from file given name.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">format(precision)</span></code></p></td>
<td class="text-left"><p>Set number of digits used in printing values in MATC.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">eval(str)</span></code></p></td>
<td class="text-left"><p>Evaluate content of string str. Another form of this command is <code class="docutils literal notranslate"><span class="pre">&#64;str</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">who</span></code></p></td>
<td class="text-left"><p>Give list of currently defined variables.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">help</span></code> or <code class="docutils literal notranslate"><span class="pre">help(&quot;symbol&quot;)</span></code></p></td>
<td class="text-left"><p>First form of the command gives list of available commands. Second form gives help on specific routine.</p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>String and I/O functions</p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head text-left"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">str</span> <span class="pre">=</span> <span class="pre">sprintf(fmt[,vec])</span></code></p></td>
<td class="text-left"><p>Return a string formatted using <code class="docutils literal notranslate"><span class="pre">fmt</span></code> and values from <code class="docutils literal notranslate"><span class="pre">vec</span></code>. A call to corresponding C-language function is made.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">vec</span> <span class="pre">=</span> <span class="pre">sscanf(str,fmt)</span></code></p></td>
<td class="text-left"><p>Return values from <code class="docutils literal notranslate"><span class="pre">str</span></code> using format <code class="docutils literal notranslate"><span class="pre">fmt</span></code>. A call to corresponding C-language function is made.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">str</span> <span class="pre">=</span> <span class="pre">fread(fp,n)</span></code></p></td>
<td class="text-left"><p>Read <code class="docutils literal notranslate"><span class="pre">n</span></code> bytes from file given by <code class="docutils literal notranslate"><span class="pre">fp</span></code>. File pointer fp should have been obtained from a call to <code class="docutils literal notranslate"><span class="pre">fopen</span></code> or <code class="docutils literal notranslate"><span class="pre">freopen</span></code>, or be the standard input file stdin. Data is returned as function value.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">vec</span> <span class="pre">=</span> <span class="pre">fscanf(fp,fmt)</span></code></p></td>
<td class="text-left"><p>Read file <code class="docutils literal notranslate"><span class="pre">fp</span></code> as given in format. Format fmt is equal to C-language format. File pointer <code class="docutils literal notranslate"><span class="pre">fp</span></code> should have been obtained from a call to <code class="docutils literal notranslate"><span class="pre">fopen</span></code> or <code class="docutils literal notranslate"><span class="pre">freopen</span></code>, or be the standard input.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">str</span> <span class="pre">=</span> <span class="pre">fgets(fp)</span></code></p></td>
<td class="text-left"><p>Read next line from fp. File pointer fp should have been obtained from a call to fopen or freopen or be the standard input.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">fwrite(fp,buf,n)</span></code></p></td>
<td class="text-left"><p>Write n bytes from buf to file fp. File pointer fp should have been obtained from a call to fopen or freopen or be the standard output (stdout) or standard error (stderr). Return value is number of bytes actually written. Note that one matrix element reserves 8 bytes of space.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">fprintf(fp,fmt[,</span> <span class="pre">vec])</span></code></p></td>
<td class="text-left"><p>Write formatted string to file fp. File pointer fp should have been obtained from a call to fopen or freopen or be the standard output (stdout) or standard error (stderr). The format fmt is equal to C-language format.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fputs(fp,str)</span></code></p></td>
<td class="text-left"><p>Write string str to file fp. File pointer fp should have been obtained from a call to fopen or freopen or be the standard input (stdin).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fp</span> <span class="pre">=</span> <span class="pre">fopen(name,mode)</span></code></p></td>
<td class="text-left"><p>Reopen file given previous file pointer, name and access mode. The most usual modes are <code class="docutils literal notranslate"><span class="pre">&quot;r&quot;</span></code> for reading and <code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code> for writing. Return value fp is used in functions reading and writing the file.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fp</span> <span class="pre">=</span> <span class="pre">freopen(fp,name,mode)</span></code></p></td>
<td class="text-left"><p>Reopen file given previous file pointer, name and access mode. The most usual modes are <code class="docutils literal notranslate"><span class="pre">&quot;r&quot;</span></code> for reading and <code class="docutils literal notranslate"><span class="pre">&quot;w&quot;</span></code> for writing. Return value fp is used in functions reading and writing the file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fclose(fp)</span> </code></p></td>
<td class="text-left"><p>Close file previously opened with fopen or freopen.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">save(name,</span> <span class="pre">a[,ascii_flag])</span></code></p></td>
<td class="text-left"><p>Close file previously opened with <code class="docutils literal notranslate"><span class="pre">fopen</span></code> or <code class="docutils literal notranslate"><span class="pre">freopen</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">load(name)</span></code></p></td>
<td class="text-left"><p>Load matrix from a file given name and in format used by <code class="docutils literal notranslate"><span class="pre">save</span></code> command.</p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>Numerical utilities</p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head text-left"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">min(matrix)</span></code></p></td>
<td class="text-left"><p>Return value is a vector containing smallest element in columns of given matrix. r = min(min(matrix)) gives smallest element of the matrix.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">max(matrix)</span></code></p></td>
<td class="text-left"><p>Return value is a vector containing largest element in columns of given matrix. <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">max(max(matrix))</span></code> gives largest element of the matrix.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">sum(matrix)</span></code></p></td>
<td class="text-left"><p>Return vector is column sums of given matrix. <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">sum(sum(matrix))</span></code> gives the total sum of elements of the matrix.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">zeros(n,m)</span></code></p></td>
<td class="text-left"><p>Return n by m matrix with elements initialized to zero.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">ones(n,m)</span></code></p></td>
<td class="text-left"><p>Return n by m matrix with elements initialized to one.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">rand(n,m)</span></code></p></td>
<td class="text-left"><p>Return n by m matrix with elements initialized with random numbers from zero to one.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">diag(a)</span></code></p></td>
<td class="text-left"><p>Given matrix return diagonal entries as a vector. Given vector return matrix with diagonal elements from vector. <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">diag(diag(a))</span></code> gives matrix with diagonal elements from matrix <code class="docutils literal notranslate"><span class="pre">a</span></code>, otherwise elements are zero.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">vector(start,end,inc)</span></code></p></td>
<td class="text-left"><p>Return vector of values going from start to end by inc.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">size(matrix)</span></code></p></td>
<td class="text-left"><p>Return size of given matrix.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">resize(matrix,n,m)</span></code></p></td>
<td class="text-left"><p>Make a matrix to look as a <code class="docutils literal notranslate"><span class="pre">n</span></code> by <code class="docutils literal notranslate"><span class="pre">m</span></code> matrix. This is the same as <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">n</span> <span class="pre">m</span> <span class="pre">%</span> <span class="pre">matrix</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">where(a)</span></code></p></td>
<td class="text-left"><p>Return a row vector giving linear index to <code class="docutils literal notranslate"><span class="pre">a</span></code> where <code class="docutils literal notranslate"><span class="pre">a</span></code> is not zero.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">matcvt(matrix,</span> <span class="pre">type)</span></code></p></td>
<td class="text-left"><p>Makes a type conversion from MATC matrix double precision array to given type, which can be one of the following: <code class="docutils literal notranslate"><span class="pre">&quot;int&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;char&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;float&quot;</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">cvtmat(special,</span> <span class="pre">type)</span></code></p></td>
<td class="text-left"><p>Makes a type conversion from given type to MATC matrix. Type can be one of the following: <code class="docutils literal notranslate"><span class="pre">&quot;int&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;char&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;float&quot;</span></code>.</p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p>Linear algebra</p></li>
</ul>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head text-left"><p></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">trace(matrix)</span></code></p></td>
<td class="text-left"><p>Return value is the sum of matrix diagonal elements.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">det(matrix)</span></code></p></td>
<td class="text-left"><p>Return value is determinant of given square matrix.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">inv(matrix)</span></code></p></td>
<td class="text-left"><p>Invert given square matrix. Computed also by operator <span class="math notranslate nohighlight">\(^{-1}\)</span></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">tril(x)</span></code></p></td>
<td class="text-left"><p>Return the lower triangle of the matrix x.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">triu(x)</span></code></p></td>
<td class="text-left"><p>Return the upper triangle of the matrix x.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">eig(matrix)</span></code></p></td>
<td class="text-left"><p>Return eigenvalues of given square matrix. The expression <code class="docutils literal notranslate"><span class="pre">r(n,0)</span></code> is real part of the n:th eigenvalue, <code class="docutils literal notranslate"><span class="pre">r(n,1)</span></code> is the imaginary part respectively.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">jacob(a,b,eps)</span></code></p></td>
<td class="text-left"><p>Solve symmetric positive definite eigenvalue problem by Jacob iteration. Return values are the eigenvalues. Also a variable eigv is created containing eigenvectors.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">lud(matrix)</span></code></p></td>
<td class="text-left"><p>Return value is LUD decomposition of given matrix.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">hesse(matrix)</span></code></p></td>
<td class="text-left"><p>Return the upper hessenberg form of given matrix.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">eye(n)</span></code></p></td>
<td class="text-left"><p>Return n by n identity matrix.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Link to this heading">#</a></h3>
<p>Although the language is pretty fast for most simple uses, it is much slower than Fortran extensions, so use with case when scalability is needed. Another point is overuse of MATC; do not use it with simple numerical expressions, <em>e.g.</em> <code class="docutils literal notranslate"><span class="pre">OneThird</span> <span class="pre">=</span> <span class="pre">Real</span> <span class="pre">$1.0/3.0</span></code> is much faster than its MATC counterpart <code class="docutils literal notranslate"><span class="pre">OneThird</span> <span class="pre">=</span> <span class="pre">Real</span> <span class="pre">MATC</span> <span class="pre">&quot;1.0/3.0&quot;</span></code>.</p>
<ul class="simple">
<li><p>Direct expression coding</p></li>
</ul>
<p>One thing that in my opinion lacks in the documentation are examples of use in conjunction with SIF. For instance, for setting the thermal conductivity of a material as temperature-dependent one could use the following snippet and modify the string to match the desired expression. An example of its usage is provided in <a class="reference external" href="https://github.com/wallytutor/WallyToolbox.jl/blob/main/apps/Elmer/conduction_refractory/transient_parallel/case.sif">this case</a>.</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="n">Heat</span><span class="w"> </span><span class="n">Conductivity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Variable</span><span class="w"> </span><span class="n">Temperature</span>
<span class="w">    </span><span class="n">Real</span><span class="w"> </span><span class="n">MATC</span><span class="w"> </span><span class="s">&quot;1.0 - tx * (2.5E-03 - 1.2E-06 * tx)&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Sourcing functions from user modules</p></li>
</ul>
<p>Models can become too complex to code in a single line. Hopefully MATC provides functions which can be declared in external modules. I avoid coding MATC directly in SIF because their syntax is different and that can quickly lead to unmaintainable code. An example of such external sourcing is provided in <a class="reference external" href="https://github.com/wallytutor/WallyToolbox.jl/tree/main/apps/Elmer/diffusion_solids/carburizing_slycke">this case</a>. You need to remember to call <code class="docutils literal notranslate"><span class="pre">source(&quot;module&quot;)</span></code> in <code class="docutils literal notranslate"><span class="pre">Simulation</span></code> section of SIF so that the functions can be used elsewhere.  The call of a function become something as</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="n">Concentration</span><span class="w"> </span><span class="n">Diffusivity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Variable</span><span class="w"> </span><span class="n">Concentration</span>
<span class="w">    </span><span class="n">Real</span><span class="w"> </span><span class="n">MATC</span><span class="w"> </span><span class="s">&quot;diffusivity(tx)&quot;</span>
</pre></div>
</div>
<p>if independent variable is concentration or for time</p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="n">Mass</span><span class="w"> </span><span class="n">Transfer</span><span class="w"> </span><span class="n">Coefficient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Variable</span><span class="w"> </span><span class="n">Time</span>
<span class="w">    </span><span class="n">Real</span><span class="w"> </span><span class="n">MATC</span><span class="w"> </span><span class="s">&quot;masstransfercoef(tx)&quot;</span>
</pre></div>
</div>
<p>You can even use multiple variables, <em>e.g.</em></p>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="n">Mass</span><span class="w"> </span><span class="n">Transfer</span><span class="w"> </span><span class="n">Coefficient</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Variable</span><span class="w"> </span><span class="n">Time</span><span class="p">,</span><span class="w"> </span><span class="n">Temperature</span>
<span class="w">    </span><span class="n">Real</span><span class="w"> </span><span class="n">MATC</span><span class="w"> </span><span class="s">&quot;masstransfercoef(tx(0), tx(1))&quot;</span>
</pre></div>
</div>
<p>PS: <em>I managed to use a single <code class="docutils literal notranslate"><span class="pre">source</span></code> in SIF, although the documentation does not state that many sources are forbidden; for some reason multiple sources work when sourcing from a file.</em></p>
<p>For more complex cases such as <a class="reference external" href="https://github.com/wallytutor/WallyToolbox.jl/tree/main/apps/Elmer/diffusion_solids/carburizing_slycke_gui">this one</a> it is worth writing actual MATC function modules; since there is no syntax highlighter available for MATC in VS Code, the <code class="docutils literal notranslate"><span class="pre">.ini</span></code> extension seems to provide better readability to the code. The problem was split in two parts: the <a class="reference external" href="https://github.com/wallytutor/WallyToolbox.jl/blob/main/apps/Elmer/diffusion_solids/carburizing_slycke_gui/models.ini">models</a> which take care of sourcing the <a class="reference external" href="https://github.com/wallytutor/WallyToolbox.jl/blob/main/apps/Elmer/diffusion_solids/carburizing_slycke_gui/conditions.ini">conditions</a>, so that basic users could only edit the latter and run their variant calculations with no coding skills. Notice that the symbols that are used in <a class="reference external" href="https://github.com/wallytutor/WallyToolbox.jl/blob/main/apps/Elmer/diffusion_solids/carburizing_slycke_gui/case.sif">SIF</a> are exported from <a class="reference external" href="https://github.com/wallytutor/WallyToolbox.jl/blob/main/apps/Elmer/diffusion_solids/carburizing_slycke_gui/models.ini#L72">this line</a> instead of being set as global variables.</p>
</section>
</section>
<section id="user-defined-functions">
<h2>User-defined functions<a class="headerlink" href="#user-defined-functions" title="Link to this heading">#</a></h2>
<p><em>Upcoming</em></p>
<section id="derived-fields">
<h3>Derived fields<a class="headerlink" href="#derived-fields" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>StreamSolver</p></li>
<li><p>FluxSolver</p></li>
</ul>
<p>#elmer/models/flux-solver</p>
<ul class="simple">
<li><p>VorticitySolver</p></li>
<li><p>DivergenceSolver</p></li>
<li><p>ScalarPotentialSolver</p></li>
<li><p>ArtificialCompressibility</p></li>
<li><p>FluidicForce</p></li>
<li><p>ElectricForce</p></li>
<li><p>RigidBodyReduction</p></li>
<li><p>FilterTimeSeries</p></li>
<li><p>DataToFieldSolver</p></li>
<li><p>ProjectToPlane</p></li>
<li><p>StructureProjectToPlane</p></li>
<li><p>FindOptimum</p></li>
</ul>
</section>
<section id="saving-data-modules">
<h3>Saving data modules<a class="headerlink" href="#saving-data-modules" title="Link to this heading">#</a></h3>
<p><strong>Note</strong>: coupling to OpenFOAM is discussed separately in another section.</p>
<ul class="simple">
<li><p>SaveData</p></li>
<li><p>SaveScalars</p></li>
</ul>
<p>#elmer/models/save-scalars</p>
<ul class="simple">
<li><p>SaveLine</p></li>
</ul>
<p>#elmer/models/save-line</p>
<ul class="simple">
<li><p>SaveMaterials</p></li>
<li><p>SaveBoundaryValues</p></li>
<li><p>ResultOutputSolve</p></li>
<li><p>ResultOutputSolver</p></li>
</ul>
<p>#elmer/models/result-output-solver</p>
<ul class="simple">
<li><p>SaveGridData</p></li>
<li><p>SaveGridData</p></li>
<li><p>Isosurface</p></li>
<li><p>IsosurfaceSolver</p></li>
</ul>
</section>
<section id="openfoam-coupling">
<h3>OpenFOAM coupling<a class="headerlink" href="#openfoam-coupling" title="Link to this heading">#</a></h3>
<p>…</p>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../ansys-fluent/tui.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Text user interface (TUI)</p>
      </div>
    </a>
    <a class="right-next"
       href="../general-tips.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">General Tips</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#quick-answers">Quick answers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#limitations-and-issues">Limitations and issues</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ongoing-work">Ongoing work</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieving-materials">Retrieving materials</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#elmer-fundamentals">Elmer Fundamentals</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocessing-steps">Preprocessing steps</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-elmer">Using Elmer</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#parallel-computing">Parallel computing</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tips-and-ideas">Tips and ideas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#material-properties">Material properties</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#postprocessing">Postprocessing</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#solver-input-files-sif">Solver Input Files (SIF)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#sections">Sections</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#matc">MATC</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#declaring-variables">Declaring variables</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#control-structures">Control structures</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#operators">Operators</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#function-definitions">Function definitions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#built-in-functions">Built-in functions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#usage">Usage</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#user-defined-functions">User-defined functions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#derived-fields">Derived fields</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#saving-data-modules">Saving data modules</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#openfoam-coupling">OpenFOAM coupling</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Walter Dal'Maz Silva
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025, Walter Dal&#39;Maz Silva.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>