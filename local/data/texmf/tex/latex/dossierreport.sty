%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% DOSSIERDOCS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{dossierreport}[2024/07/01 Standard report preamble.]

% -----------------------------------------------------------------------------
% PACKAGES
% -----------------------------------------------------------------------------

% These go first.
\RequirePackage[T1]{fontenc}
\RequirePackage{fontspec}

% Hyperref comes before everything else.
\RequirePackage{hyperref}

% Bibliography.
\RequirePackage[
    sorting=none,
    backend=biber,
    style=numeric-comp
]{biblatex}

% For table formatting.
\RequirePackage{booktabs}
\RequirePackage{caption}
\RequirePackage{makecell}
\RequirePackage{multirow}

% General formatting.
\RequirePackage{fancyvrb}
\RequirePackage{geometry}
\RequirePackage{paralist}
\RequirePackage{pgfplots}
\RequirePackage{setspace}
\RequirePackage[titles]{tocloft}

% Syntax highlighting.
\RequirePackage{minted}

% General maths.
\RequirePackage{amsmath}
\RequirePackage{amssymb}
% \RequirePackage{wasysym}
\RequirePackage{xfrac}

% Chemistry support.
\RequirePackage{chemformula}

% Symbols table.
\RequirePackage[
    symbols,
    nogroupskip,
    sort=none
]{glossaries-extra}

% This comes after other maths packages.
\RequirePackage{unicode-math}

% -----------------------------------------------------------------------------
% PACKAGE OPTIONS
% -----------------------------------------------------------------------------

% Syntax highlight for Scheme language (with Fluent support).
\newif\if@langscheme\@langschemefalse
\DeclareOption{langscheme}{\@langschemetrue}

\DeclareOption*{\PackageWarning{dossierreport}{Unknown '\CurrentOption'}}
\ProcessOptions\relax

\if@langscheme%
  \RequirePackage{langscheme}
\fi

% -----------------------------------------------------------------------------
% CONFIGURATION
% -----------------------------------------------------------------------------

% Compatibility issues.
\pgfplotsset{compat=1.18}

% Set all math symbols to upright.
\unimathsetup{%
    math-style=upright,%
    bold-style=upright,%
    sans-style=upright,%
    nabla=upright,%
    partial=upright,%
}

% Configure fonts.
\setmainfont[Ligatures=TeX]{Calibri}
\setmathfont{Cambria Math}

% Make margins smaller.
\geometry{margin=20mm}

% Configure TOC.
\renewcommand{\contentsname}{Table of contents}
\renewcommand{\cftdotsep}{5}
\renewcommand{\cftsecdotsep}{5}
\renewcommand{\cftsecleader}{\bfseries\cftdotfill{\cftsecdotsep}}

% Configure hyperlinks.
\hypersetup{
    colorlinks = true,
    linkcolor = black
}

% Proper setup of multipage code blocks:
% https://tex.stackexchange.com/questions/12428
\newenvironment{code}{\captionsetup{type=listing}}{}

% -----------------------------------------------------------------------------
% SHARED
% -----------------------------------------------------------------------------

\RequirePackage{dossiercmds}

\endinput

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% EOF
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%